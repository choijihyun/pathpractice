<!doctype html>
<html lang="kr">

<head>
	<title>과목 찾기</title>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
	<!-- Costumize CSS -->
	<link rel="stylesheet" type="text/css" href="css/style_find_subject.css">

	<!-- fontawesome 으로 icon 사용하기 -->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">

	<!-- Optional JavaScript -->
	<!-- jQuery first, then Popper.js, then Bootstrap JS -->
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
</head>


<body class="text-center">
	<!-- Container -->
	<div class="container" data-spy = "scroll">
		<div class="row justify-content-md-center justify-content-xs-center">
			<div class="col-md-6 col-md-auto col-xs-6 col-xs-auto login-box ">
				<h1 class="text-center m-0 wdi-red">FIND!</h1>
				<hr>
				<div class="jumbotron p-0 rounded main-area">

					<div class="form-row m-3">
						<div class= "col-md-3 col-xs-3 mt-1 mb-1 label">
							과목명
						</div>
						<div class= "col-md-7 col-xs-7 ">
							<input type="text"  class="form-control form-control-sm mt-1 mb-1 flat-input" id="subjectName">
						</div>
						<div class= "col-md-2 col-xs-2 mt-1 mb-1">
							<a  class="btn btn-sm btn-icon" aria-label="Left Align">
								<span class="fas fa-search" id="click"></span>
							</a>
						</div>
						<table style="overflow:auto;" id="table_findSub" class="table table-borderless table-sm table-time">
							<colgroup>
								<col width="20%"/>
								<col width="40%"/>
								<col width="40%"/>
							</colgroup>
							<thead>
								<tr>
									<th class="text-center">NO</th>
									<th class="text-center" style="border-left: 1px solid #e5e5e5;">학수번호</th>
									<th class="text-center" style="border-left: 1px solid #e5e5e5;">교수명</th>
								</tr>
							</thead>
							<tbody>
							</tbody>
						</table>
					</div>

					<div class= "col-md-12 col-xs-12" >
						<a class="btn btn-lg btn-block btn-login" id = "submit" >
							OK
						</a>
					</div>

				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript">
		$(document).ready(function(){
	      $('#click').on('click',function(){ //입력한 과목명 가지고 선택할 수 있게 만들어야함.(subNum 받아야함!)
	      	var checkList = [];

	      	$.ajax({
	      		url:"http://localhost:8090//subject/searchSubject.json",

	      		type : "GET",
	      		data : {'word':$('#subjectName').val()},
	      		success : function(result){
	               if(result['result'] === 'no data'){ //과목 검색 성공
	               	alert('검색 실패');
	               }else{
	               	alert('검색 성공');
	               	console.log(result);

	               	console.log(result['result'][0]['subNo']);
	               	console.log(result['result'].length);

	               	var	tableLen = result['result'].length;
	               	var table = document.getElementById("table_findSub"),rIndex,cIndex;

	               	var cell = new Array(); 
	               	for(var i=0 ; i <tableLen ; i++){
	               		newRow = table.insertRow(table.length),
	               		cell[0] = newRow.insertCell(0),
	               		cell[1] = newRow.insertCell(1),
	               		cell[2] = newRow.insertCell(2),

	               		cell[0].innerHTML = i+1;
	               		cell[1].innerHTML = result['result'][i]['subNo'];
	               		cell[2].innerHTML = result['result'][i]['profName'];

	               		
	               		$(newRow).addClass("stripe-top");
	               		for(var j=0 ; j<2 ; j++)
	               			$(cell[j]).css("border-right","1px solid #e5e5e5");
	               	}
	               }               
	           },
	           error : function(){
	           	alert('검색 에러');
	           }
	       });


	      });
	  });
	</script>
</body>
</html>
